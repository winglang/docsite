---
title: Inflight Magazine - Issue 1
description: Updates from the Wing team
authors: 
  - eladb
  - name: Matthew Bonig
    title: Developer Relations
    url: https://github.com/mbonig
    image_url: https://avatars.githubusercontent.com/mbonig

tags: [cloud-oriented programming, winglang, newsletter, updates]
hide_table_of_contents: true
---

Welcome to the **Wing Inflight Magazine**, our periodic update on what's up (yes,
two puns) with the Wing programming language and the community that's starting
to gather around the mission to reshape cloud development.

We will try to publish these frequently to keep them short and sweet, but since
this is our first issue since the alpha release, there is a bit more ground to
cover.

### TL;DR

A summary of topics in today's issue:

#### Deep dives

- [Deep dive: Our alpha release](#the-wingnuts-are-here)
- [Deep dive: The story of inflight functions](#diving-deeper-into-inflight-functions) -
  "inflight functions" are Wing's primary "cloud-oriented" language innovation
  and we are focused on getting them right.

#### New features

- [New: Implicit `await`, explicit `defer`](#implicit-await-and-explicit-defer-ftw) -
  async calls in Wing are implicitly `await`ed. You can use `defer` to get the
  promise instead.
- [New: Introducing `while` and `enum`](#yes-we-are-still-implementing-some-very-basic-language-features) -
  our primary engineering focus is to finish implementing the compiler so we can
  actually start using Wing to build some real stuff.
- [New: Wing Console now supports hot
  reloading](#hot-reloading-the-cloud-with-wing-console) - you can now `wing run
  FILE.w` and the Wing Console will take care of the rest. Just edit your code
  and the console will update automatically.

#### Request for Comments

- [RFC: Wing SDK Spec](#requesting-comments-on-our-sdk-specification) - your
  golden opportunity for shaping the first set of resources and APIs that will be included
  in the Wing SDK.
- [RFC: Terraform Resources in Wing](#rfc-using-terraform-resources-in-wing) - exploring
  the desired developer experience for using arbitrary Terraform resources in Wing.

### TS;GMM (too short; give me more)

#### The Wingnuts are here

Before heading to re:Invent in late November we figured that it makes sense to
start sharing publicly what we've been working on in the past 6 months. The main
goal was to be able to talk to folks at the conference and invite them to check
out our very early alpha bits and initial
[documentation](https://docs.winglang.io).

We published our [manifesto for cloud-oriented
programming](https://docs.winglang.io/blog/2022/11/23/manifesto) which describes
the background for our project. It talks about the current challenges that
developers and companies face when building for the cloud and describes the
impedance mismatch between the applications we are building and the languages we
use.

Since we are in early alpha stages (e.g. `while` loops were not even supported
by the language), we realized that at this stage we are looking for a handful of
folks that are enthusiastic and excited about our approach. We definitely didn't
expect over 1,000 people to sign up for alpha access. We were surprised how many
folks at re:Invent have already heard about the project, and have already formed
strong opinions and had deep questions to ask.

This was followed up by a [Hacker News] post that brought about 11K new visitors
to [winglang.io](https://winglang.io), with tons of interesting feedback and
relevant conversations:

[Hacker News]: https://news.ycombinator.com/item?id=34051325

> "This is one of the more sophisticated and cool of the "Self Provisioning
Runtime" concepts that have emerged in the last few years" -
[zoomzoom](https://news.ycombinator.com/item?id=34053394)

> "I think there would be a lot of value in having an imperativ(sic), very high
level language for cloud workflows that abstracts the underlying implementation
or even cloud provider away." -
[wolframhempel](https://news.ycombinator.com/item?id=34055556)

> "Great works! Seeing the demo in the front page really makes me think of the
cloud architecture as a whole may just be an operating system out of itself." -
[stevefan1999](https://news.ycombinator.com/item?id=34054752)

> "That animation on the home page is sick af" -
> [tomcam](https://news.ycombinator.com/item?id=34056121)

> "The team is top notch (of CDK fame) found a non-trivial bug was assigned and
fixed in 30 min. In general joy to interact with. Very strong focus on dev.
experience. After a very subpar experience of building a very large enterprise
project using AWS serverless stack Wing is the first thing that gives me hope
that things can be way better." -
[qaq](https://news.ycombinator.com/item?id=34053585)

#### Yes, we are still implementing some very basic language features

In the next few months, our main focus is implement compiler support for the
initial [Wing Language Specification](https://docs.winglang.io/reference/spec). The spec currently includes the minimal
set of features we believe are required to build cloud applications with Wing.

We recently added support for `while` loops ([#312](https://github.com/winglang/wing/pull/312)) and basic `enum`
declarations ([#273](https://github.com/winglang/wing/pull/273)).

While loops in look like this, where `CONDITION` is any boolean expression. In
the spirit of minimalism, we decided not to require parenthesis around the
loop's condition:

```js
while CONDITION {
  // rock!
}
```

Enums are currently very simplistic (likely too simplistic). They are a custom
type and can just contain a list of members (at the moment we don't even support
specifying a value for the members):

```js
enum RecordType {
  CUSTOMER,
  ORDER,
  INVOICE
};

let record = RecordType.CUSTOMER;
```

Naturally enums are going to evolve. There's an interesting discussion over
[#977](https://github.com/winglang/wing/issues/977) on giving enums Algebraic
super-powers, with similar capabilities that exist in Rust and Swift.

Check out the [Wing Language
Roadmap](https://github.com/orgs/winglang/projects/1) for an up-to-date status.

#### Diving deeper into inflight functions

[Inflight functions](https://docs.winglang.io/concepts/inflights) are likely
Wing's most significant language innovation. Since cloud applications are
distributed systems and code is executed on multiple machines across various
compute platforms, our language needs first-class support for this idea: code
that executes in the cloud and interacts with cloud resources around it. This is
where inflight functions come into play.

Asynchronous and concurrent programming have been a continuous source for
programming language innovation and research. Since the early days of
[`fork()`](https://man7.org/linux/man-pages/man2/fork.2.html) in POSIX,
multi-threaded programming, [Goroutines](https://gobyexample.com/goroutines),
[Erlang Processes](https://www.erlang.org/doc/reference_manual/processes.html)
and the recently popularized, cooperative concurrency with `async/await`,
developers have been looking for ways to write applications that included more
than a single thread of execution in a safe and intuitive manner.

Wing's inflight functions can be thought of as a *type of asynchronous function*
that can be packaged and executed on a remote system, such as inside a
[Kubernetes Pod](https://kubernetes.io/docs/concepts/workloads/pods/), [AWS
Lambda](https://aws.amazon.com/lambda/), [Azure
Functions](https://azure.microsoft.com/en-us/products/functions/), on
[Cloudflare Edge Workers](https://workers.cloudflare.com/) or on any other cloud
compute platform.

Our canonic example is a function that wants to put an object inside a bucket:

```js
bring cloud;

let my_bucket = new cloud.Bucket();

new cloud.Function(inflight () => {
  my_bucket.put("hello", "world");
});
```

The magic happens when the inflight function is calling `my_bucket.put()`. This
is not a normal method being called on an in-memory object, no no no! It is
actually a `S3::PutObject` API call over the network from the AWS Lambda
function to the Amazon S3 service. Wing needs to do quite a lot in order to turn
this into something that can work on the cloud: it needs to wire up the bucket
information during deployment, it needs to add the right permissions to the
Lambda's IAM policy, it needs to create a code bundle with just the right set of
dependencies.

Inflight functions can interact with resources through their **inflight
interface**. This is not very different from e.g. `async` functions in
JavaScript, where it doesn't really make sense to `await` an async function from
synchronous contexts. It is also not very different from how
[Goroutines](https://gobyexample.com/goroutines) can only interact with the
world through [Channels](https://gobyexample.com/channels), or child processes
can interact through pipes. 

Inflight functions are an *isolation boundary* enforced by the compiler. If you
try to call `my_bucket.put()` outside of an `inflight` context the Wing compiler
will not let you:

```
Cannot call inflight function "my_bucket.put" while in preflight phase
```

Many folks are asking us [why is Wing a language and not a
library](https://news.ycombinator.com/item?id=34051472). Inflight functions (and
resources) are probably the best example at this point. It is not possible to
express this type of isolation and interaction semantics through a library in
existing languages. We've seen some worthy efforts such as [Pulumi's Function
Serialization](https://www.pulumi.com/docs/intro/concepts/function-serialization/)
and [Sam Goodwin](https://github.com/sam-goodwin)'s
[Punchcard](https://github.com/sam-goodwin/punchcard) and
[Functionless](https://functionless.org/) projects. In all of these cases, we
think the resulting developer experience is sub-par due to limitations of the
host languages and runtimes.

Given their novelty, getting inflight functions right is a top priority for us
at the moment. We recently decided to [remove the short hand
`~>`](https://github.com/winglang/wing/pull/866) to represent inflight, and
instead use a simple `inflight` modifier. We've been debating this for a while,
and a
[comment](https://winglang.slack.com/archives/C047QFSUL5R/p1670050350350909?thread_ts=1670030202.531749&cid=C047QFSUL5R)
from a Wingnut, Adam Ruka, tilted the scale in favor of the less quirky syntax
(until further notice).

The next major step for inflights was to establish a composition model that
allows inflights to be composed together, while tracking the operations
performed by each one for the purpose of permission inference and other wiring.
We've implemented the first stage in the SDK
[#869](https://github.com/winglang/wing/pull/869), and we are working on
implementing this in the compiler
[#542](https://github.com/winglang/wing/issues/542), which will enable the
creation of resources with inflight methods.

To see what this work will enable, check out this [user
story](https://github.com/winglang/wing/blob/4ac4f0985702f092719f97760c99249757e6dba4/rfcs/epic-todo-app-compiler.md).

#### Implicit `await` and explicit `defer` FTW

On a related topic, we decided that awaiting asynchronous calls will be implicit
in Wing ([spec change](https://github.com/winglang/wing/pull/929), [compiler
update](https://github.com/winglang/wing/pull/986)).

We are trying to optimize the language for the common cases, and we realized
that it makes sense to reverse the common syntax around async calls. So, by
default, when calling an async method in Wing, the call will be awaited, and you
can use `defer` to access the promise (and `await` it later).

```js
let handler = inflight () => {
  my_bucket.put("file1.txt", "1");
  my_bucket.put("file2.txt", "2");
};
```

Each call to `put()` will be awaited by default. Let's say I want to use
`Promise.all()` to await all of the promises in parallel, I can obtain them
using `defer`:

```js
let handler = inflight () => {
  let promise1 = defer my_bucket.put("file1.txt", "1");
  let promise2 = defer my_bucket.put("file2.txt", "2");

  Promise.all(promise1, promise2);
};
```

#### Requesting comments on our SDK specification

We have been working on the initial revision for the specification of the Wing
SDK. This is where we are discussing which resources will be shipped as part of
Wing's standard library, what's the right abstraction for each one, how can we
map them across the various providers, and cross-cutting design guidelines and
programming patterns.

To whet you appetite, here is the list of resources we are considering for our beta:

|Resource|Priority|Description
|--------|--------|-----------
| Bucket | P1 | object storage, similar to AWS S3, Azure Blob Storage, GCP Storage
| Queue | P1 | a message queue, similar to AWS SQS, Azure Storage Queues, GCP Pub/Sub
| Function | P1 | a serverless function, similar to AWS Lambda, Azure Functions, GCP Cloud Functions
| Topic | P1 | a pub/sub topic, similar to AWS SNS, Azure Event Grid, GCP Pub/Sub
| Logger | P1 | a log aggregator
| Tracer | P1 | a distributed tracing system, similar to AWS X-Ray, Azure Application Insights, GCP Stackdriver Trace
| Counter | P1 | an atomic counter
| Schedule | P1 | a cron job / scheduled task trigger
| Website | P1 | a CDN-backed static website
| Api | P1 | a REST API
| Metric | P1 | a metric for monitoring system performance
| Alarm | P1 | an alarm that triggers when a metric crosses a threshold
| Service | P1 | a long-running service, similar to AWS ECS, Azure Container Instances, GCP Cloud Run
| Table | P2 | a relational database table
| Key-value store | P2 | a lightweight key-value store, similar to Redis or Memcached
| Job | P2 | a long-running compute workload that can be run on demand
| Workflow | P2 | a task orchestration engine, similar to AWS Step Functions, Azure Logic Apps, GCP Workflows
| Secret | P2 | a secret value, similar to AWS Secrets Manager, Azure Key Vault, GCP Secret Manager
| Stream | P2 | a stream of events, similar to AWS Kinesis, Azure Event Hubs, GCP Pub/Sub and Dataflow
| OnDeploy | P2 | a variation of Function that runs every time the app is deployed

We would love to get your comments and thoughts on this important [pull
request](https://github.com/winglang/wing/pull/858), which will be used to
prioritize the [roadmap](https://github.com/orgs/winglang/projects/3) for our
SDK towards beta.

#### The `std` namespace is taking shape

We are also starting to devise a way for declaring the APIs for the built-in
types in Wing. This [pull request](https://github.com/winglang/wing/pull/976)
defines a new SDK namespace called `std` which is implicitly loaded into the
compiler's type checker and will be used to declare and implement the APIs for
types such as `Array`, `Map` and `str`.

The first type in `std` is the `duration` type which represents a time-based
duration (a pretty common thing needed in cloud applications):

```js
let dur = 1m;
print("${dur.seconds}");
print("${dur.minutes}");
```

#### Hot reloading the cloud with Wing Console

A great example how Wing is able to remove developer experience boilerplate.

Previously, Wing Console needed a `.wsim` file as input, which is a Wing program
compiled for the `sim` target. This means that if you changed your code, you
would need to recompile manually and reload the console.

We've realized we can short circuit the whole experience and simply allow
pointing Wing Console directly at a `.w` source file. The console will take care of
watching the file (and host directory) for changes, recompile and reload.

The console now prints compilation errors and clicking on them jumps over to
your favorite editor at the right line.

Here's a [short video](https://www.youtube.com/watch?v=hFIv7YZ-ROU) that shows
this new feature.

#### RFC: Using Terraform resources in Wing

The beauty and power of the cloud comes from the endless ecosystem of services
that we can leverage as developers to build applications. Contrary to what
people [might think](https://news.ycombinator.com/item?id=34052400), Wing is
designed with cloud heterogeneity in mind.

In that spirit, we've started to explore what would be the best developer
experience in Wing for using any resource from the vast Terraform provider
ecosystem.

[This issue](https://github.com/winglang/wing/issues/489) and [this
RFC](https://github.com/winglang/wing/pull/895) are starting to explore this
idea, and we would love your feedback and inputs on this topic.

### Summary

Yes, we know this was a bit lengthy, but we are just so very excited to share
what we've been up to. We promise to try and publish these more occasionally, so
it's easier to keep track. 

We are just warming our engines... Stay tuned!

As usual, we couldn't be more excited for anyone to join our journey to make the
cloud a better place to build software. We constantly hang out on
[Slack](https://t.winglang.io/slack), and if you haven't already, please [join
our alpha](https://t.winglang.io/alpha).

See you on your next flight.